from sqlalchemy.testing.requirements import Requirements

from alembic import util
from ..testing import exclusions


class SuiteRequirements(Requirements):
 #property
 #ef schemas(self):
 #""Target database must support external schemas, and have one
 #amed 'test_schema'."""

 #eturn exclusions.open()

 #property
 #ef autocommit_isolation(self):
 #""target database should support 'AUTOCOMMIT' isolation level"""

 #eturn exclusions.closed()

 #property
 #ef materialized_views(self):
 #""needed for sqlalchemy compat"""
 #eturn exclusions.closed()

 #property
 #ef unique_constraint_reflection(self):
 #ef doesnt_have_check_uq_constraints(config):
 #rom sqlalchemy import inspect

 #nsp = inspect(config.db)
 #ry:
 #nsp.get_unique_constraints("x")
 #xcept NotImplementedError:
 #eturn True
 #xcept TypeError:
 #eturn True
 #xcept Exception:
 #ass
 #eturn False

 #eturn exclusions.skip_if(doesnt_have_check_uq_constraints)

 #property
 #ef sequences(self):
 #""Target database must support SEQUENCEs."""

 #eturn exclusions.only_if(
 #lambda config: config.db.dialect.supports_sequences],
 #no sequence support",
 #

 #property
 #ef foreign_key_match(self):
 #eturn exclusions.open()

 #property
 #ef foreign_key_constraint_reflection(self):
 #eturn exclusions.open()

 #property
 #ef check_constraints_w_enforcement(self):
 #""Target database must support check constraints
 #nd also enforce them."""

 #eturn exclusions.open()

 #property
 #ef reflects_pk_names(self):
 #eturn exclusions.closed()

 #property
 #ef reflects_fk_options(self):
 #eturn exclusions.closed()

 #property
 #ef sqlalchemy_1x(self):
 #eturn exclusions.skip_if(
 #ambda config: util.sqla_2,
 #SQLAlchemy 1.x test",
 #

 #property
 #ef sqlalchemy_2(self):
 #eturn exclusions.skip_if(
 #ambda config: not util.sqla_2,
 #SQLAlchemy 2.x test",
 #

 #property
 #ef asyncio(self):
 #ef go(config):
 #ry:
 #mport greenlet  # noqa: F401
 #xcept ImportError:
 #eturn False
 #lse:
 #eturn True

 #eturn exclusions.only_if(go)

 #property
 #ef comments(self):
 #eturn exclusions.only_if(
 #ambda config: config.db.dialect.supports_comments
 #

 #property
 #ef alter_column(self):
 #eturn exclusions.open()

 #property
 #ef computed_columns(self):
 #eturn exclusions.closed()

 #property
 #ef computed_columns_warn_no_persisted(self):
 #ef go(config):
 #eturn hasattr(
 #onfig.db.dialect, "supports_virtual_generated_columns"
 #

 #eturn exclusions.only_if("postgresql<18") + exclusions.only_if(go)

 #property
 #ef autoincrement_on_composite_pk(self):
 #eturn exclusions.closed()

 #property
 #ef fk_ondelete_is_reflected(self):
 #eturn exclusions.closed()

 #property
 #ef fk_onupdate_is_reflected(self):
 #eturn exclusions.closed()

 #property
 #ef fk_onupdate(self):
 #eturn exclusions.open()

 #property
 #ef fk_ondelete_restrict(self):
 #eturn exclusions.open()

 #property
 #ef fk_onupdate_restrict(self):
 #eturn exclusions.open()

 #property
 #ef fk_ondelete_noaction(self):
 #eturn exclusions.open()

 #property
 #ef fk_initially(self):
 #eturn exclusions.closed()

 #property
 #ef fk_deferrable(self):
 #eturn exclusions.closed()

 #property
 #ef fk_deferrable_is_reflected(self):
 #eturn exclusions.closed()

 #property
 #ef fk_names(self):
 #eturn exclusions.open()

 #property
 #ef integer_subtype_comparisons(self):
 #eturn exclusions.open()

 #property
 #ef no_name_normalize(self):
 #eturn exclusions.skip_if(
 #ambda config: config.db.dialect.requires_name_normalize
 #

 #property
 #ef identity_columns(self):
 #eturn exclusions.closed()

 #property
 #ef identity_columns_alter(self):
 #eturn exclusions.closed()
