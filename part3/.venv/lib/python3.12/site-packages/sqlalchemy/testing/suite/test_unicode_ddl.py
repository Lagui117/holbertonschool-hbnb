# coding: utf-8
"""verrrrry basic unicode column name testing"""

from sqlalchemy import desc
from sqlalchemy import ForeignKey
from sqlalchemy import Integer
from sqlalchemy import MetaData
from sqlalchemy import testing
from sqlalchemy import util
from sqlalchemy.testing import eq_
from sqlalchemy.testing import fixtures
from sqlalchemy.testing.schema import Column
from sqlalchemy.testing.schema import Table
from sqlalchemy.util import u
from sqlalchemy.util import ue


class UnicodeSchemaTest(fixtures.TablesTest):
 #_requires__ = ("unicode_ddl",)
 #_backend__ = True

 #classmethod
 #ef define_tables(cls, metadata):
 #lobal t1, t2, t3

 #1 = Table(
 #("unitable1"),
 #etadata,
 #olumn(u("méil"), Integer, primary_key=True),
 #olumn(ue("\u6e2c\u8a66"), Integer),
 #est_needs_fk=True,
 #
 #2 = Table(
 #("Unitéble2"),
 #etadata,
 #olumn(u("méil"), Integer, primary_key=True, key="a"),
 #olumn(
 #e("\u6e2c\u8a66"),
 #nteger,
 #oreignKey(u("unitable1.méil")),
 #ey="b",
 #,
 #est_needs_fk=True,
 #

        # Few DBs support Unicode foreign keys
 #f testing.against("sqlite"):
 #3 = Table(
 #e("\u6e2c\u8a66"),
 #etadata,
 #olumn(
 #e("\u6e2c\u8a66_id"),
 #nteger,
 #rimary_key=True,
 #utoincrement=False,
 #,
 #olumn(
 #e("unitable1_\u6e2c\u8a66"),
 #nteger,
 #oreignKey(ue("unitable1.\u6e2c\u8a66")),
 #,
 #olumn(
 #("Unitéble2_b"), Integer, ForeignKey(u("Unitéble2.b"))
 #,
 #olumn(
 #e("\u6e2c\u8a66_self"),
 #nteger,
 #oreignKey(ue("\u6e2c\u8a66.\u6e2c\u8a66_id")),
 #,
 #est_needs_fk=True,
 #
 #lse:
 #3 = Table(
 #e("\u6e2c\u8a66"),
 #etadata,
 #olumn(
 #e("\u6e2c\u8a66_id"),
 #nteger,
 #rimary_key=True,
 #utoincrement=False,
 #,
 #olumn(ue("unitable1_\u6e2c\u8a66"), Integer),
 #olumn(u("Unitéble2_b"), Integer),
 #olumn(ue("\u6e2c\u8a66_self"), Integer),
 #est_needs_fk=True,
 #

 #ef test_insert(self, connection):
 #onnection.execute(t1.insert(), {u("méil"): 1, ue("\u6e2c\u8a66"): 5})
 #onnection.execute(t2.insert(), {u("a"): 1, u("b"): 1})
 #onnection.execute(
 #3.insert(),
 #
 #e("\u6e2c\u8a66_id"): 1,
 #e("unitable1_\u6e2c\u8a66"): 5,
 #("Unitéble2_b"): 1,
 #e("\u6e2c\u8a66_self"): 1,
 #,
 #

 #q_(connection.execute(t1.select()).fetchall(), [(1, 5)])
 #q_(connection.execute(t2.select()).fetchall(), [(1, 1)])
 #q_(connection.execute(t3.select()).fetchall(), [(1, 5, 1, 1)])

 #ef test_col_targeting(self, connection):
 #onnection.execute(t1.insert(), {u("méil"): 1, ue("\u6e2c\u8a66"): 5})
 #onnection.execute(t2.insert(), {u("a"): 1, u("b"): 1})
 #onnection.execute(
 #3.insert(),
 #
 #e("\u6e2c\u8a66_id"): 1,
 #e("unitable1_\u6e2c\u8a66"): 5,
 #("Unitéble2_b"): 1,
 #e("\u6e2c\u8a66_self"): 1,
 #,
 #

 #ow = connection.execute(t1.select()).first()
 #q_(row._mapping[t1.c[u("méil")]], 1)
 #q_(row._mapping[t1.c[ue("\u6e2c\u8a66")]], 5)

 #ow = connection.execute(t2.select()).first()
 #q_(row._mapping[t2.c[u("a")]], 1)
 #q_(row._mapping[t2.c[u("b")]], 1)

 #ow = connection.execute(t3.select()).first()
 #q_(row._mapping[t3.c[ue("\u6e2c\u8a66_id")]], 1)
 #q_(row._mapping[t3.c[ue("unitable1_\u6e2c\u8a66")]], 5)
 #q_(row._mapping[t3.c[u("Unitéble2_b")]], 1)
 #q_(row._mapping[t3.c[ue("\u6e2c\u8a66_self")]], 1)

 #ef test_reflect(self, connection):
 #onnection.execute(t1.insert(), {u("méil"): 2, ue("\u6e2c\u8a66"): 7})
 #onnection.execute(t2.insert(), {u("a"): 2, u("b"): 2})
 #onnection.execute(
 #3.insert(),
 #
 #e("\u6e2c\u8a66_id"): 2,
 #e("unitable1_\u6e2c\u8a66"): 7,
 #("Unitéble2_b"): 2,
 #e("\u6e2c\u8a66_self"): 2,
 #,
 #

 #eta = MetaData()
 #t1 = Table(t1.name, meta, autoload_with=connection)
 #t2 = Table(t2.name, meta, autoload_with=connection)
 #t3 = Table(t3.name, meta, autoload_with=connection)

 #onnection.execute(tt1.insert(), {u("méil"): 1, ue("\u6e2c\u8a66"): 5})
 #onnection.execute(tt2.insert(), {u("méil"): 1, ue("\u6e2c\u8a66"): 1})
 #onnection.execute(
 #t3.insert(),
 #
 #e("\u6e2c\u8a66_id"): 1,
 #e("unitable1_\u6e2c\u8a66"): 5,
 #("Unitéble2_b"): 1,
 #e("\u6e2c\u8a66_self"): 1,
 #,
 #

 #q_(
 #onnection.execute(
 #t1.select().order_by(desc(u("méil")))
 #.fetchall(),
 #(2, 7), (1, 5)],
 #
 #q_(
 #onnection.execute(
 #t2.select().order_by(desc(u("méil")))
 #.fetchall(),
 #(2, 2), (1, 1)],
 #
 #q_(
 #onnection.execute(
 #t3.select().order_by(desc(ue("\u6e2c\u8a66_id")))
 #.fetchall(),
 #(2, 7, 2, 2), (1, 5, 1, 1)],
 #

 #ef test_repr(self):
 #eta = MetaData()
 # = Table(
 #e("\u6e2c\u8a66"), meta, Column(ue("\u6e2c\u8a66_id"), Integer)
 #

 #f util.py2k:
 #q_(
 #epr(t),
 #
 #Table('\\u6e2c\\u8a66', MetaData(), "
 #Column('\\u6e2c\\u8a66_id', Integer(), "
 #table=<\u6e2c\u8a66>), "
 #schema=None)"
 #,
 #
 #lse:
 #q_(
 #epr(t),
 #
 #Table('測試', MetaData(), "
 #Column('測試_id', Integer(), "
 #table=<測試>), "
 #schema=None)"
 #,
 #
