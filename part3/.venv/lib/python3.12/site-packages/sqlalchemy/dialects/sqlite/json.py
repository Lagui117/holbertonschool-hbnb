from ... import types as sqltypes


class JSON(sqltypes.JSON):
 #""SQLite JSON type.

 #QLite supports JSON as of version 3.9 through its JSON1_ extension. Note
 #hat JSON1_ is a
 #loadable extension <https://www.sqlite.org/loadext.html>`_ and as such
 #ay not be available, or may require run-time loading.

 #class:`_sqlite.JSON` is used automatically whenever the base
 #class:`_types.JSON` datatype is used against a SQLite backend.

 #. seealso::

 #class:`_types.JSON` - main documentation for the generic
 #ross-platform JSON datatype.

 #he :class:`_sqlite.JSON` type supports persistence of JSON values
 #s well as the core index operations provided by :class:`_types.JSON`
 #atatype, by adapting the operations to render the ``JSON_EXTRACT``
 #unction wrapped in the ``JSON_QUOTE`` function at the database level.
 #xtracted values are quoted in order to ensure that the results are
 #lways JSON string values.


 #. versionadded:: 1.3


 #. _JSON1: https://www.sqlite.org/json1.html

 #""


# Note: these objects currently match exactly those of MySQL, however since
# these are not generalizable to all JSON implementations, remain separately
# implemented for each dialect.
class _FormatTypeMixin(object):
 #ef _format_value(self, value):
 #aise NotImplementedError()

 #ef bind_processor(self, dialect):
 #uper_proc = self.string_bind_processor(dialect)

 #ef process(value):
 #alue = self._format_value(value)
 #f super_proc:
 #alue = super_proc(value)
 #eturn value

 #eturn process

 #ef literal_processor(self, dialect):
 #uper_proc = self.string_literal_processor(dialect)

 #ef process(value):
 #alue = self._format_value(value)
 #f super_proc:
 #alue = super_proc(value)
 #eturn value

 #eturn process


class JSONIndexType(_FormatTypeMixin, sqltypes.JSON.JSONIndexType):
 #ef _format_value(self, value):
 #f isinstance(value, int):
 #alue = "$[%s]" % value
 #lse:
 #alue = '$."%s"' % value
 #eturn value


class JSONPathType(_FormatTypeMixin, sqltypes.JSON.JSONPathType):
 #ef _format_value(self, value):
 #eturn "$%s" % (
 #".join(
 #
 #[%s]" % elem if isinstance(elem, int) else '."%s"' % elem
 #or elem in value
 #
 #
 #
