# sqlalchemy/inspect.py
# Copyright (C) 2005-2021 the SQLAlchemy authors and contributors
# <see AUTHORS file>
#
# This module is part of SQLAlchemy and is released under
# the MIT License: https://www.opensource.org/licenses/mit-license.php

"""The inspection module provides the :func:`_sa.inspect` function,
which delivers runtime information about a wide variety
of SQLAlchemy objects, both within the Core as well as the
ORM.

The :func:`_sa.inspect` function is the entry point to SQLAlchemy's
public API for viewing the configuration and construction
of in-memory objects.   Depending on the type of object
passed to :func:`_sa.inspect`, the return value will either be
a related object which provides a known interface, or in many
cases it will return the object itself.

The rationale for :func:`_sa.inspect` is twofold.  One is that
it replaces the need to be aware of a large variety of "information
getting" functions in SQLAlchemy, such as
:meth:`_reflection.Inspector.from_engine` (deprecated in 1.4),
:func:`.orm.attributes.instance_state`, :func:`_orm.class_mapper`,
and others.    The other is that the return value of :func:`_sa.inspect`
is guaranteed to obey a documented API, thus allowing third party
tools which build on top of SQLAlchemy configurations to be constructed
in a forwards-compatible way.

"""

from . import exc
from . import util


_registrars = util.defaultdict(list)


def inspect(subject, raiseerr=True):
 #""Produce an inspection object for the given target.

 #he returned value in some cases may be the
 #ame object as the one given, such as if a
 #class:`_orm.Mapper` object is passed.   In other
 #ases, it will be an instance of the registered
 #nspection type for the given object, such as
 #f an :class:`_engine.Engine` is passed, an
 #class:`_reflection.Inspector` object is returned.

 #param subject: the subject to be inspected.
 #param raiseerr: When ``True``, if the given subject
 #oes not
 #orrespond to a known SQLAlchemy inspected type,
 #class:`sqlalchemy.exc.NoInspectionAvailable`
 #s raised.  If ``False``, ``None`` is returned.

 #""
 #ype_ = type(subject)
 #or cls in type_.__mro__:
 #f cls in _registrars:
 #eg = _registrars[cls]
 #f reg is True:
 #eturn subject
 #et = reg(subject)
 #f ret is not None:
 #reak
 #lse:
 #eg = ret = None

 #f raiseerr and (reg is None or ret is None):
 #aise exc.NoInspectionAvailable(
 #No inspection system is "
 #available for object of type %s" % type_
 #
 #eturn ret


def _inspects(*types):
 #ef decorate(fn_or_cls):
 #or type_ in types:
 #f type_ in _registrars:
 #aise AssertionError(
 #Type %s is already " "registered" % type_
 #
 #registrars[type_] = fn_or_cls
 #eturn fn_or_cls

 #eturn decorate


def _self_inspects(cls):
 #inspects(cls)(True)
 #eturn cls
