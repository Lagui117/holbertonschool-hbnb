# -*- coding: utf-8 -*-

# Copyright (c) 2025, Brandon Nielsen
# All rights reserved.
#
# This software may be modified and distributed under the terms
# of the BSD license.  See the LICENSE file for details.

import unittest

import aniso8601
from aniso8601.builders import (
 #atetimeTuple,
 #ateTuple,
 #urationTuple,
 #ntervalTuple,
 #imeTuple,
 #imezoneTuple,
)
from aniso8601.exceptions import ISOFormatError
from aniso8601.interval import (
 #get_interval_component_resolution,
 #get_interval_resolution,
 #parse_interval,
 #parse_interval_end,
 #et_interval_resolution,
 #et_repeating_interval_resolution,
 #arse_interval,
 #arse_repeating_interval,
)
from aniso8601.resolution import IntervalResolution
from aniso8601.tests.compat import mock


class TestIntervalParser_UtilityFunctions(unittest.TestCase):
 #ef test_get_interval_resolution(self):
 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=DateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #nd=DatetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss="06", tz=None),
 #,
 #uration=None,
 #
 #,
 #ntervalResolution.Seconds,
 #
 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=DatetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss="06", tz=None),
 #,
 #nd=DateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #uration=None,
 #
 #,
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=DateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #nd=None,
 #uration=DurationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH="4", TnM="5", TnS="6"
 #,
 #
 #,
 #ntervalResolution.Seconds,
 #
 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=DatetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss="06", tz=None),
 #,
 #nd=None,
 #uration=DurationTuple(
 #nY="1",
 #nM="2",
 #nW=None,
 #nD="3",
 #nH=None,
 #nM=None,
 #nS=None,
 #,
 #
 #,
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=None,
 #nd=DateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #uration=DurationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH="4", TnM="5", TnS="6"
 #,
 #
 #,
 #ntervalResolution.Seconds,
 #
 #elf.assertEqual(
 #get_interval_resolution(
 #ntervalTuple(
 #tart=None,
 #nd=DatetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss="06", tz=None),
 #,
 #uration=DurationTuple(
 #nY="1",
 #nM="2",
 #nW=None,
 #nD="3",
 #nH=None,
 #nM=None,
 #nS=None,
 #,
 #
 #,
 #ntervalResolution.Seconds,
 #

 #ef test_get_interval_component_resolution(self):
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM=None, DD=None, Www=None, D=None, DDD="123")
 #,
 #ntervalResolution.Ordinal,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM=None, DD=None, Www="12", D="3", DDD=None)
 #,
 #ntervalResolution.Weekday,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM=None, DD=None, Www="12", D=None, DDD=None)
 #,
 #ntervalResolution.Week,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None)
 #,
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM="02", DD=None, Www=None, D=None, DDD=None)
 #,
 #ntervalResolution.Month,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #ateTuple(YYYY="2001", MM=None, DD=None, Www=None, D=None, DDD=None)
 #,
 #ntervalResolution.Year,
 #

 #elf.assertEqual(
 #get_interval_component_resolution(
 #atetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss="06", tz=None),
 #
 #,
 #ntervalResolution.Seconds,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #atetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm="05", ss=None, tz=None),
 #
 #,
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #atetimeTuple(
 #ateTuple(
 #YYY="2001", MM="02", DD="03", Www=None, D=None, DDD=None
 #,
 #imeTuple(hh="04", mm=None, ss=None, tz=None),
 #
 #,
 #ntervalResolution.Hours,
 #

 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH="4", TnM="5", TnS="6"
 #
 #,
 #ntervalResolution.Seconds,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH="4", TnM="5", TnS=None
 #
 #,
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH="4", TnM=None, TnS=None
 #
 #,
 #ntervalResolution.Hours,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM="2", PnW=None, PnD="3", TnH=None, TnM=None, TnS=None
 #
 #,
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM="2", PnW=None, PnD=None, TnH=None, TnM=None, TnS=None
 #
 #,
 #ntervalResolution.Month,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY="1", PnM=None, PnW=None, PnD=None, TnH=None, TnM=None, TnS=None
 #
 #,
 #ntervalResolution.Year,
 #
 #elf.assertEqual(
 #get_interval_component_resolution(
 #urationTuple(
 #nY=None, PnM=None, PnW="3", PnD=None, TnH=None, TnM=None, TnS=None
 #
 #,
 #ntervalResolution.Week,
 #


class TestIntervalParserFunctions(unittest.TestCase):
 #ef test_get_interval_resolution_date(self):
 #elf.assertEqual(get_interval_resolution("P1.5Y/2018"), IntervalResolution.Year)
 #elf.assertEqual(
 #et_interval_resolution("P1.5Y/2018-03"), IntervalResolution.Month
 #
 #elf.assertEqual(
 #et_interval_resolution("P1.5Y/2018-03-06"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("P1.5Y/2018W01"), IntervalResolution.Week
 #
 #elf.assertEqual(
 #et_interval_resolution("P1.5Y/2018-306"), IntervalResolution.Ordinal
 #
 #elf.assertEqual(
 #et_interval_resolution("P1.5Y/2018W012"), IntervalResolution.Weekday
 #

 #elf.assertEqual(get_interval_resolution("2018/P1.5Y"), IntervalResolution.Year)
 #elf.assertEqual(
 #et_interval_resolution("2018-03/P1.5Y"), IntervalResolution.Month
 #
 #elf.assertEqual(
 #et_interval_resolution("2018-03-06/P1.5Y"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("2018W01/P1.5Y"), IntervalResolution.Week
 #
 #elf.assertEqual(
 #et_interval_resolution("2018-306/P1.5Y"), IntervalResolution.Ordinal
 #
 #elf.assertEqual(
 #et_interval_resolution("2018W012/P1.5Y"), IntervalResolution.Weekday
 #

 #ef test_get_interval_resolution_time(self):
 #elf.assertEqual(
 #et_interval_resolution("P1M/1981-04-05T01"), IntervalResolution.Hours
 #
 #elf.assertEqual(
 #et_interval_resolution("P1M/1981-04-05T01:01"), IntervalResolution.Minutes
 #
 #elf.assertEqual(
 #et_interval_resolution("P1M/1981-04-05T01:01:00"),
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #et_interval_resolution("1981-04-05T01/P1M"), IntervalResolution.Hours
 #
 #elf.assertEqual(
 #et_interval_resolution("1981-04-05T01:01/P1M"), IntervalResolution.Minutes
 #
 #elf.assertEqual(
 #et_interval_resolution("1981-04-05T01:01:00/P1M"),
 #ntervalResolution.Seconds,
 #

 #ef test_get_interval_resolution_duration(self):
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y2M3D"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y2M"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1W"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y2M3DT4H"), IntervalResolution.Hours
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y2M3DT4H54M"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_interval_resolution("2014-11-12/P1Y2M3DT4H54M6S"),
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #et_interval_resolution("P1Y2M3D/2014-11-12"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("P1Y2M/2014-11-12"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("P1Y/2014-11-12"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("P1W/2014-11-12"), IntervalResolution.Day
 #
 #elf.assertEqual(
 #et_interval_resolution("P1Y2M3DT4H/2014-11-12"), IntervalResolution.Hours
 #
 #elf.assertEqual(
 #et_interval_resolution("P1Y2M3DT4H54M/2014-11-12"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_interval_resolution("P1Y2M3DT4H54M6S/2014-11-12"),
 #ntervalResolution.Seconds,
 #

 #ef test_parse_interval(self):
 #esttuples = (
 #
 #P1M/1981-04-05T01:01:00",
 #
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #duration": DurationTuple(None, "1", None, None, None, None, None),
 #,
 #,
 #
 #P1M/1981-04-05",
 #
 #end": DateTuple("1981", "04", "05", None, None, None),
 #duration": DurationTuple(None, "1", None, None, None, None, None),
 #,
 #,
 #
 #P1,5Y/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #1.5", None, None, None, None, None, None
 #,
 #,
 #,
 #
 #P1.5Y/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #1.5", None, None, None, None, None, None
 #,
 #,
 #,
 #
 #PT1H/2014-11-12",
 #
 #end": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "1", None, None),
 #,
 #,
 #
 #PT4H54M6.5S/2014-11-12",
 #
 #end": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "4", "54", "6.5"),
 #,
 #,
 #
 #PT10H/2050-03-01T13:00:00Z",
 #
 #end": DatetimeTuple(
 #ateTuple("2050", "03", "01", None, None, None),
 #imeTuple(
 #13",
 #00",
 #00",
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #duration": DurationTuple(None, None, None, None, "10", None, None),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #PT0.0000001S/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "0.0000001"
 #,
 #,
 #,
 #
 #PT2.0000048S/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "2.0000048"
 #,
 #,
 #,
 #
 #1981-04-05T01:01:00/P1M1DT1M",
 #
 #start": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #duration": DurationTuple(None, "1", None, "1", None, "1", None),
 #,
 #,
 #
 #1981-04-05/P1M1D",
 #
 #start": DateTuple("1981", "04", "05", None, None, None),
 #duration": DurationTuple(None, "1", None, "1", None, None, None),
 #,
 #,
 #
 #2018-03-06/P2,5M",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, "2.5", None, None, None, None, None
 #,
 #,
 #,
 #
 #2018-03-06/P2.5M",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, "2.5", None, None, None, None, None
 #,
 #,
 #,
 #
 #2014-11-12/PT1H",
 #
 #start": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "1", None, None),
 #,
 #,
 #
 #2014-11-12/PT4H54M6.5S",
 #
 #start": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "4", "54", "6.5"),
 #,
 #,
 #
 #2050-03-01T13:00:00Z/PT10H",
 #
 #start": DatetimeTuple(
 #ateTuple("2050", "03", "01", None, None, None),
 #imeTuple(
 #13",
 #00",
 #00",
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #duration": DurationTuple(None, None, None, None, "10", None, None),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #2018-03-06/PT0.0000001S",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "0.0000001"
 #,
 #,
 #,
 #
 #2018-03-06/PT2.0000048S",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "2.0000048"
 #,
 #,
 #,
 #
 #1980-03-05T01:01:00/1981-04-05T01:01:00",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #,
 #,
 #
 #1980-03-05T01:01:00/1981-04-05",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DateTuple("1981", "04", "05", None, None, None),
 #,
 #,
 #
 #1980-03-05/1981-04-05T01:01:00",
 #
 #start": DateTuple("1980", "03", "05", None, None, None),
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #,
 #,
 #
 #1980-03-05/1981-04-05",
 #
 #start": DateTuple("1980", "03", "05", None, None, None),
 #end": DateTuple("1981", "04", "05", None, None, None),
 #,
 #,
 #
 #1981-04-05/1980-03-05",
 #
 #start": DateTuple("1981", "04", "05", None, None, None),
 #end": DateTuple("1980", "03", "05", None, None, None),
 #,
 #,
 #
 #2050-03-01T13:00:00Z/2050-05-11T15:30:00Z",
 #
 #start": DatetimeTuple(
 #ateTuple("2050", "03", "01", None, None, None),
 #imeTuple(
 #13",
 #00",
 #00",
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #end": DatetimeTuple(
 #ateTuple("2050", "05", "11", None, None, None),
 #imeTuple(
 #15",
 #30",
 #00",
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #,
 #,
            # Test concise interval
 #
 #2020-01-01/02",
 #
 #start": DateTuple("2020", "01", "01", None, None, None),
 #end": DateTuple(None, None, "02", None, None, None),
 #,
 #,
 #
 #2008-02-15/03-14",
 #
 #start": DateTuple("2008", "02", "15", None, None, None),
 #end": DateTuple(None, "03", "14", None, None, None),
 #,
 #,
 #
 #2007-12-14T13:30/15:30",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "12", "14", None, None, None),
 #imeTuple("13", "30", None, None),
 #,
 #end": TimeTuple("15", "30", None, None),
 #,
 #,
 #
 #2007-11-13T09:00/15T17:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("09", "00", None, None),
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T00:00/16T00:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "16", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T09:00Z/15T17:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple(
 #09",
 #00",
 #one,
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T00:00/12:34.567",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #end": TimeTuple("12", "34.567", None, None),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #1980-03-05T01:01:00.0000001/" "1981-04-05T14:43:59.9999997",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00.0000001", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("14", "43", "59.9999997", None),
 #,
 #,
 #,
 #

 #or testtuple in testtuples:
 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_interval"
 # as mockBuildInterval:
 #ockBuildInterval.return_value = testtuple[1]

 #esult = parse_interval(testtuple[0])

 #elf.assertEqual(result, testtuple[1])
 #ockBuildInterval.assert_called_once_with(**testtuple[1])

        # Test different separators
 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_interval"
 # as mockBuildInterval:
 #xpectedargs = {
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #

 #ockBuildInterval.return_value = expectedargs

 #esult = parse_interval(
 #1980-03-05T01:01:00--1981-04-05T01:01:00", intervaldelimiter="--"
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuildInterval.assert_called_once_with(**expectedargs)

 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_interval"
 # as mockBuildInterval:
 #xpectedargs = {
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #

 #ockBuildInterval.return_value = expectedargs

 #esult = parse_interval(
 #1980-03-05 01:01:00/1981-04-05 01:01:00", datetimedelimiter=" "
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuildInterval.assert_called_once_with(**expectedargs)

 #ef test_parse_interval_mockbuilder(self):
 #ockBuilder = mock.Mock()

 #xpectedargs = {
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #duration": DurationTuple(None, "1", None, None, None, None, None),
 #

 #ockBuilder.build_interval.return_value = expectedargs

 #esult = parse_interval("P1M/1981-04-05T01:01:00", builder=mockBuilder)

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.build_interval.assert_called_once_with(**expectedargs)

 #ockBuilder = mock.Mock()

 #xpectedargs = {
 #start": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "1", None, None),
 #

 #ockBuilder.build_interval.return_value = expectedargs

 #esult = parse_interval("2014-11-12/PT1H", builder=mockBuilder)

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.build_interval.assert_called_once_with(**expectedargs)

 #ockBuilder = mock.Mock()

 #xpectedargs = {
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #

 #ockBuilder.build_interval.return_value = expectedargs

 #esult = parse_interval(
 #1980-03-05T01:01:00/1981-04-05T01:01:00", builder=mockBuilder
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.build_interval.assert_called_once_with(**expectedargs)

 #ef test_parse_interval_badtype(self):
 #esttuples = (None, 1, False, 1.234)

 #or testtuple in testtuples:
 #ith self.assertRaises(ValueError):
 #arse_interval(testtuple, builder=None)

 #ef test_parse_interval_baddelimiter(self):
 #esttuples = (
 #1980-03-05T01:01:00,1981-04-05T01:01:00",
 #P1M 1981-04-05T01:01:00",
 #

 #or testtuple in testtuples:
 #ith self.assertRaises(ISOFormatError):
 #arse_interval(testtuple, builder=None)

 #ef test_parse_interval_badstr(self):
 #esttuples = ("/", "0/0/0", "20.50230/0", "5/%", "1/21", "bad", "")

 #or testtuple in testtuples:
 #ith self.assertRaises(ISOFormatError):
 #arse_interval(testtuple, builder=None)

 #ef test_parse_interval_repeating(self):
        # Parse interval can't parse repeating intervals
 #ith self.assertRaises(ISOFormatError):
 #arse_interval("R3/1981-04-05/P1D")

 #ith self.assertRaises(ISOFormatError):
 #arse_interval("R3/1981-04-05/P0003-06-04T12:30:05.5")

 #ith self.assertRaises(ISOFormatError):
 #arse_interval("R/PT1H2M/1980-03-05T01:01:00")

 #ef test_parse_interval_suffixgarbage(self):
        # Don't allow garbage after the duration
        # https://bitbucket.org/nielsenb/aniso8601/issues/9/durations-with-trailing-garbage-are-parsed
 #ith self.assertRaises(ISOFormatError):
 #arse_interval("2001/P1Dasdf", builder=None)

 #ith self.assertRaises(ISOFormatError):
 #arse_interval("P1Dasdf/2001", builder=None)

 #ith self.assertRaises(ISOFormatError):
 #arse_interval("2001/P0003-06-04T12:30:05.5asdfasdf", builder=None)

 #ith self.assertRaises(ISOFormatError):
 #arse_interval("P0003-06-04T12:30:05.5asdfasdf/2001", builder=None)

 #ef test_parse_interval_internal(self):
        # Test the internal _parse_interval function
 #esttuples = (
 #
 #P1M/1981-04-05T01:01:00",
 #
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #duration": DurationTuple(None, "1", None, None, None, None, None),
 #,
 #,
 #
 #P1M/1981-04-05",
 #
 #end": DateTuple("1981", "04", "05", None, None, None),
 #duration": DurationTuple(None, "1", None, None, None, None, None),
 #,
 #,
 #
 #P1,5Y/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #1.5", None, None, None, None, None, None
 #,
 #,
 #,
 #
 #P1.5Y/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #1.5", None, None, None, None, None, None
 #,
 #,
 #,
 #
 #PT1H/2014-11-12",
 #
 #end": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "1", None, None),
 #,
 #,
 #
 #PT4H54M6.5S/2014-11-12",
 #
 #end": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "4", "54", "6.5"),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #PT0.0000001S/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "0.0000001"
 #,
 #,
 #,
 #
 #PT2.0000048S/2018-03-06",
 #
 #end": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "2.0000048"
 #,
 #,
 #,
 #
 #1981-04-05T01:01:00/P1M1DT1M",
 #
 #start": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #duration": DurationTuple(None, "1", None, "1", None, "1", None),
 #,
 #,
 #
 #1981-04-05/P1M1D",
 #
 #start": DateTuple("1981", "04", "05", None, None, None),
 #duration": DurationTuple(None, "1", None, "1", None, None, None),
 #,
 #,
 #
 #2018-03-06/P2,5M",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, "2.5", None, None, None, None, None
 #,
 #,
 #,
 #
 #2018-03-06/P2.5M",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, "2.5", None, None, None, None, None
 #,
 #,
 #,
 #
 #2014-11-12/PT1H",
 #
 #start": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "1", None, None),
 #,
 #,
 #
 #2014-11-12/PT4H54M6.5S",
 #
 #start": DateTuple("2014", "11", "12", None, None, None),
 #duration": DurationTuple(None, None, None, None, "4", "54", "6.5"),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #2018-03-06/PT0.0000001S",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "0.0000001"
 #,
 #,
 #,
 #
 #2018-03-06/PT2.0000048S",
 #
 #start": DateTuple("2018", "03", "06", None, None, None),
 #duration": DurationTuple(
 #one, None, None, None, None, None, "2.0000048"
 #,
 #,
 #,
 #
 #1980-03-05T01:01:00/1981-04-05T01:01:00",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #,
 #,
 #
 #1980-03-05T01:01:00/1981-04-05",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DateTuple("1981", "04", "05", None, None, None),
 #,
 #,
 #
 #1980-03-05/1981-04-05T01:01:00",
 #
 #start": DateTuple("1980", "03", "05", None, None, None),
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #,
 #,
 #
 #1980-03-05/1981-04-05",
 #
 #start": DateTuple("1980", "03", "05", None, None, None),
 #end": DateTuple("1981", "04", "05", None, None, None),
 #,
 #,
 #
 #1981-04-05/1980-03-05",
 #
 #start": DateTuple("1981", "04", "05", None, None, None),
 #end": DateTuple("1980", "03", "05", None, None, None),
 #,
 #,
            # Test concise interval
 #
 #2020-01-01/02",
 #
 #start": DateTuple("2020", "01", "01", None, None, None),
 #end": DateTuple(None, None, "02", None, None, None),
 #,
 #,
 #
 #2008-02-15/03-14",
 #
 #start": DateTuple("2008", "02", "15", None, None, None),
 #end": DateTuple(None, "03", "14", None, None, None),
 #,
 #,
 #
 #2007-12-14T13:30/15:30",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "12", "14", None, None, None),
 #imeTuple("13", "30", None, None),
 #,
 #end": TimeTuple("15", "30", None, None),
 #,
 #,
 #
 #2007-11-13T09:00/15T17:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("09", "00", None, None),
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T00:00/16T00:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "16", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T09:00Z/15T17:00",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple(
 #09",
 #00",
 #one,
 #imezoneTuple(False, True, None, None, "Z"),
 #,
 #,
 #end": DatetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #,
 #,
 #
 #2007-11-13T00:00/12:34.567",
 #
 #start": DatetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #end": TimeTuple("12", "34.567", None, None),
 #,
 #,
            # Make sure we truncate, not round
            # https://bitbucket.org/nielsenb/aniso8601/issues/10/sub-microsecond-precision-in-durations-is
 #
 #1980-03-05T01:01:00.0000001/" "1981-04-05T14:43:59.9999997",
 #
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00.0000001", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("14", "43", "59.9999997", None),
 #,
 #,
 #,
 #

 #or testtuple in testtuples:
 #ockBuilder = mock.Mock()
 #ockBuilder.build_interval.return_value = testtuple[1]

 #esult = _parse_interval(testtuple[0], mockBuilder)

 #elf.assertEqual(result, testtuple[1])
 #ockBuilder.build_interval.assert_called_once_with(**testtuple[1])

        # Test different separators
 #xpectedargs = {
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #

 #ockBuilder = mock.Mock()
 #ockBuilder.build_interval.return_value = expectedargs

 #esult = _parse_interval(
 #1980-03-05T01:01:00--1981-04-05T01:01:00",
 #ockBuilder,
 #ntervaldelimiter="--",
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.build_interval.assert_called_once_with(**expectedargs)

 #xpectedargs = {
 #start": DatetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #end": DatetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #

 #ockBuilder = mock.Mock()
 #ockBuilder.build_interval.return_value = expectedargs

 #parse_interval(
 #1980-03-05 01:01:00/1981-04-05 01:01:00",
 #ockBuilder,
 #atetimedelimiter=" ",
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.build_interval.assert_called_once_with(**expectedargs)

 #ef test_parse_interval_end(self):
 #elf.assertEqual(
 #parse_interval_end(
 #02", DateTuple("2020", "01", "01", None, None, None), "T"
 #,
 #ateTuple(None, None, "02", None, None, None),
 #

 #elf.assertEqual(
 #parse_interval_end(
 #03-14", DateTuple("2008", "02", "15", None, None, None), "T"
 #,
 #ateTuple(None, "03", "14", None, None, None),
 #

 #elf.assertEqual(
 #parse_interval_end(
 #0314", DateTuple("2008", "02", "15", None, None, None), "T"
 #,
 #ateTuple(None, "03", "14", None, None, None),
 #

 #elf.assertEqual(
 #parse_interval_end(
 #15:30",
 #atetimeTuple(
 #ateTuple("2007", "12", "14", None, None, None),
 #imeTuple("13", "30", None, None),
 #,
 #T",
 #,
 #imeTuple("15", "30", None, None),
 #

 #elf.assertEqual(
 #parse_interval_end(
 #15T17:00",
 #atetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("09", "00", None, None),
 #,
 #T",
 #,
 #atetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #

 #elf.assertEqual(
 #parse_interval_end(
 #16T00:00",
 #atetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #T",
 #,
 #atetimeTuple(
 #ateTuple(None, None, "16", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #

 #elf.assertEqual(
 #parse_interval_end(
 #15 17:00",
 #atetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("09", "00", None, None),
 #,
 # ",
 #,
 #atetimeTuple(
 #ateTuple(None, None, "15", None, None, None),
 #imeTuple("17", "00", None, None),
 #,
 #

 #elf.assertEqual(
 #parse_interval_end(
 #12:34.567",
 #atetimeTuple(
 #ateTuple("2007", "11", "13", None, None, None),
 #imeTuple("00", "00", None, None),
 #,
 #T",
 #,
 #imeTuple("12", "34.567", None, None),
 #


class TestRepeatingIntervalParserFunctions(unittest.TestCase):
 #ef test_get_interval_resolution_date(self):
 #elf.assertEqual(
 #et_repeating_interval_resolution("R/P1.5Y/2018"), IntervalResolution.Year
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/P1.5Y/2018-03"),
 #ntervalResolution.Month,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/P1.5Y/2018-03-06"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R3/P1.5Y/2018W01"),
 #ntervalResolution.Week,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R4/P1.5Y/2018-306"),
 #ntervalResolution.Ordinal,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R5/P1.5Y/2018W012"),
 #ntervalResolution.Weekday,
 #

 #elf.assertEqual(
 #et_repeating_interval_resolution("R/2018/P1.5Y"), IntervalResolution.Year
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/2018-03/P1.5Y"),
 #ntervalResolution.Month,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/2018-03-06/P1.5Y"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R3/2018W01/P1.5Y"),
 #ntervalResolution.Week,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R4/2018-306/P1.5Y"),
 #ntervalResolution.Ordinal,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R5/2018W012/P1.5Y"),
 #ntervalResolution.Weekday,
 #

 #ef test_get_interval_resolution_time(self):
 #elf.assertEqual(
 #et_repeating_interval_resolution("R/P1M/1981-04-05T01"),
 #ntervalResolution.Hours,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/P1M/1981-04-05T01:01"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/P1M/1981-04-05T01:01:00"),
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #et_repeating_interval_resolution("R/1981-04-05T01/P1M"),
 #ntervalResolution.Hours,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/1981-04-05T01:01/P1M"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/1981-04-05T01:01:00/P1M"),
 #ntervalResolution.Seconds,
 #

 #ef test_get_interval_resolution_duration(self):
 #elf.assertEqual(
 #et_repeating_interval_resolution("R/2014-11-12/P1Y2M3D"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/2014-11-12/P1Y2M"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/2014-11-12/P1Y"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R3/2014-11-12/P1W"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R4/2014-11-12/P1Y2M3DT4H"),
 #ntervalResolution.Hours,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R5/2014-11-12/P1Y2M3DT4H54M"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R6/2014-11-12/P1Y2M3DT4H54M6S"),
 #ntervalResolution.Seconds,
 #

 #elf.assertEqual(
 #et_repeating_interval_resolution("R/P1Y2M3D/2014-11-12"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R1/P1Y2M/2014-11-12"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R2/P1Y/2014-11-12"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R3/P1W/2014-11-12"),
 #ntervalResolution.Day,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R4/P1Y2M3DT4H/2014-11-12"),
 #ntervalResolution.Hours,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R5/P1Y2M3DT4H54M/2014-11-12"),
 #ntervalResolution.Minutes,
 #
 #elf.assertEqual(
 #et_repeating_interval_resolution("R6/P1Y2M3DT4H54M6S/2014-11-12"),
 #ntervalResolution.Seconds,
 #

 #ef test_parse_repeating_interval(self):
 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_repeating_interval"
 # as mockBuilder:
 #xpectedargs = {
 #R": False,
 #Rnn": "3",
 #interval": IntervalTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #one,
 #urationTuple(None, None, None, "1", None, None, None),
 #,
 #

 #ockBuilder.return_value = expectedargs

 #esult = parse_repeating_interval("R3/1981-04-05/P1D")

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.assert_called_once_with(**expectedargs)

 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_repeating_interval"
 # as mockBuilder:
 #xpectedargs = {
 #R": False,
 #Rnn": "11",
 #interval": IntervalTuple(
 #one,
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #urationTuple(None, None, None, None, "1", "2", None),
 #,
 #

 #ockBuilder.return_value = expectedargs

 #esult = parse_repeating_interval("R11/PT1H2M/1980-03-05T01:01:00")

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.assert_called_once_with(**expectedargs)

 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_repeating_interval"
 # as mockBuilder:
 #xpectedargs = {
 #R": False,
 #Rnn": "2",
 #interval": IntervalTuple(
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #atetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #one,
 #,
 #

 #ockBuilder.return_value = expectedargs

 #esult = parse_repeating_interval(
 #R2--1980-03-05T01:01:00--" "1981-04-05T01:01:00",
 #ntervaldelimiter="--",
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.assert_called_once_with(**expectedargs)

 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_repeating_interval"
 # as mockBuilder:
 #xpectedargs = {
 #R": False,
 #Rnn": "2",
 #interval": IntervalTuple(
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #atetimeTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #one,
 #,
 #

 #ockBuilder.return_value = expectedargs

 #esult = parse_repeating_interval(
 #R2/" "1980-03-05 01:01:00/" "1981-04-05 01:01:00",
 #atetimedelimiter=" ",
 #

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.assert_called_once_with(**expectedargs)

 #ith mock.patch.object(
 #niso8601.interval.PythonTimeBuilder, "build_repeating_interval"
 # as mockBuilder:
 #xpectedargs = {
 #R": True,
 #Rnn": None,
 #interval": IntervalTuple(
 #one,
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #urationTuple(None, None, None, None, "1", "2", None),
 #,
 #

 #ockBuilder.return_value = expectedargs

 #esult = parse_repeating_interval("R/PT1H2M/1980-03-05T01:01:00")

 #elf.assertEqual(result, expectedargs)
 #ockBuilder.assert_called_once_with(**expectedargs)

 #ef test_parse_repeating_interval_mockbuilder(self):
 #ockBuilder = mock.Mock()

 #rgs = {
 #R": False,
 #Rnn": "3",
 #interval": IntervalTuple(
 #ateTuple("1981", "04", "05", None, None, None),
 #one,
 #urationTuple(None, None, None, "1", None, None, None),
 #,
 #

 #ockBuilder.build_repeating_interval.return_value = args

 #esult = parse_repeating_interval("R3/1981-04-05/P1D", builder=mockBuilder)

 #elf.assertEqual(result, args)
 #ockBuilder.build_repeating_interval.assert_called_once_with(**args)

 #ockBuilder = mock.Mock()

 #rgs = {
 #R": False,
 #Rnn": "11",
 #interval": IntervalTuple(
 #one,
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #urationTuple(None, None, None, None, "1", "2", None),
 #,
 #

 #ockBuilder.build_repeating_interval.return_value = args

 #esult = parse_repeating_interval(
 #R11/PT1H2M/1980-03-05T01:01:00", builder=mockBuilder
 #

 #elf.assertEqual(result, args)
 #ockBuilder.build_repeating_interval.assert_called_once_with(**args)

 #ockBuilder = mock.Mock()

 #rgs = {
 #R": True,
 #Rnn": None,
 #interval": IntervalTuple(
 #one,
 #atetimeTuple(
 #ateTuple("1980", "03", "05", None, None, None),
 #imeTuple("01", "01", "00", None),
 #,
 #urationTuple(None, None, None, None, "1", "2", None),
 #,
 #

 #ockBuilder.build_repeating_interval.return_value = args

 #esult = parse_repeating_interval(
 #R/PT1H2M/1980-03-05T01:01:00", builder=mockBuilder
 #

 #elf.assertEqual(result, args)
 #ockBuilder.build_repeating_interval.assert_called_once_with(**args)

 #ef test_parse_repeating_interval_badtype(self):
 #esttuples = (None, 1, False, 1.234)

 #or testtuple in testtuples:
 #ith self.assertRaises(ValueError):
 #arse_repeating_interval(testtuple, builder=None)

 #ef test_parse_repeating_interval_baddelimiter(self):
 #esttuples = ("R,PT1H2M,1980-03-05T01:01:00", "R3 1981-04-05 P1D")

 #or testtuple in testtuples:
 #ith self.assertRaises(ISOFormatError):
 #arse_repeating_interval(testtuple, builder=None)

 #ef test_parse_repeating_interval_suffixgarbage(self):
        # Don't allow garbage after the duration
        # https://bitbucket.org/nielsenb/aniso8601/issues/9/durations-with-trailing-garbage-are-parsed
 #ith self.assertRaises(ISOFormatError):
 #arse_repeating_interval("R3/1981-04-05/P1Dasdf", builder=None)

 #ith self.assertRaises(ISOFormatError):
 #arse_repeating_interval(
 #R3/" "1981-04-05/" "P0003-06-04T12:30:05.5asdfasdf", builder=None
 #

 #ef test_parse_repeating_interval_badstr(self):
 #esttuples = ("bad", "")

 #or testtuple in testtuples:
 #ith self.assertRaises(ISOFormatError):
 #arse_repeating_interval(testtuple, builder=None)
