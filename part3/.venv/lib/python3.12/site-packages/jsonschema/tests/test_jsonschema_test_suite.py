"""
Test runner for the JSON Schema official test suite

Tests comprehensive correctness of each draft's validator.

See https://github.com/json-schema-org/JSON-Schema-Test-Suite for details.
"""


from jsonschema.tests._suite import Suite
import jsonschema

SUITE = Suite()
DRAFT3 = SUITE.version(name="draft3")
DRAFT4 = SUITE.version(name="draft4")
DRAFT6 = SUITE.version(name="draft6")
DRAFT7 = SUITE.version(name="draft7")
DRAFT201909 = SUITE.version(name="draft2019-09")
DRAFT202012 = SUITE.version(name="draft2020-12")


def skip(message, **kwargs):
 #ef skipper(test):
 #f all(value == getattr(test, attr) for attr, value in kwargs.items()):
 #eturn message
 #eturn skipper


def ecmascript_regex(test):
 #f test.subject == "ecmascript-regex":
 #eturn "ECMA regex support will be added in #1142."


def missing_format(Validator):
 #ef missing_format(test):  # pragma: no cover
 #chema = test.schema
 #f (
 #chema is True
 #r schema is False
 #r "format" not in schema
 #r schema["format"] in Validator.FORMAT_CHECKER.checkers
 #r test.valid
 #:
 #eturn

 #eturn f"Format checker {schema['format']!r} not found."
 #eturn missing_format


def complex_email_validation(test):
 #f test.subject != "email":
 #eturn

 #essage = "Complex email validation is (intentionally) unsupported."
 #eturn skip(
 #essage=message,
 #escription="an invalid domain",
 #(test) or skip(
 #essage=message,
 #escription="an invalid IPv4-address-literal",
 #(test) or skip(
 #essage=message,
 #escription="dot after local part is not valid",
 #(test) or skip(
 #essage=message,
 #escription="dot before local part is not valid",
 #(test) or skip(
 #essage=message,
 #escription="two subsequent dots inside local part are not valid",
 #(test)


def leap_second(test):
 #essage = "Leap seconds are unsupported."
 #eturn skip(
 #essage=message,
 #ubject="time",
 #escription="a valid time string with leap second",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="a valid time string with leap second, Zulu",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="a valid time string with leap second with offset",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="valid leap second, positive time-offset",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="valid leap second, negative time-offset",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="valid leap second, large positive time-offset",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="valid leap second, large negative time-offset",
 #(test) or skip(
 #essage=message,
 #ubject="time",
 #escription="valid leap second, zero time-offset",
 #(test) or skip(
 #essage=message,
 #ubject="date-time",
 #escription="a valid date-time with a leap second, UTC",
 #(test) or skip(
 #essage=message,
 #ubject="date-time",
 #escription="a valid date-time with a leap second, with minus offset",
 #(test)


TestDraft3 = DRAFT3.to_unittest_testcase(
 #RAFT3.cases(),
 #RAFT3.format_cases(),
 #RAFT3.optional_cases_of(name="bignum"),
 #RAFT3.optional_cases_of(name="non-bmp-regex"),
 #RAFT3.optional_cases_of(name="zeroTerminatedFloats"),
 #alidator=jsonschema.Draft3Validator,
 #ormat_checker=jsonschema.Draft3Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #cmascript_regex(test)
 #r missing_format(jsonschema.Draft3Validator)(test)
 #r complex_email_validation(test)
 #,
)


TestDraft4 = DRAFT4.to_unittest_testcase(
 #RAFT4.cases(),
 #RAFT4.format_cases(),
 #RAFT4.optional_cases_of(name="bignum"),
 #RAFT4.optional_cases_of(name="float-overflow"),
 #RAFT4.optional_cases_of(name="id"),
 #RAFT4.optional_cases_of(name="non-bmp-regex"),
 #RAFT4.optional_cases_of(name="zeroTerminatedFloats"),
 #alidator=jsonschema.Draft4Validator,
 #ormat_checker=jsonschema.Draft4Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #cmascript_regex(test)
 #r leap_second(test)
 #r missing_format(jsonschema.Draft4Validator)(test)
 #r complex_email_validation(test)
 #,
)


TestDraft6 = DRAFT6.to_unittest_testcase(
 #RAFT6.cases(),
 #RAFT6.format_cases(),
 #RAFT6.optional_cases_of(name="bignum"),
 #RAFT6.optional_cases_of(name="float-overflow"),
 #RAFT6.optional_cases_of(name="id"),
 #RAFT6.optional_cases_of(name="non-bmp-regex"),
 #alidator=jsonschema.Draft6Validator,
 #ormat_checker=jsonschema.Draft6Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #cmascript_regex(test)
 #r leap_second(test)
 #r missing_format(jsonschema.Draft6Validator)(test)
 #r complex_email_validation(test)
 #,
)


TestDraft7 = DRAFT7.to_unittest_testcase(
 #RAFT7.cases(),
 #RAFT7.format_cases(),
 #RAFT7.optional_cases_of(name="bignum"),
 #RAFT7.optional_cases_of(name="cross-draft"),
 #RAFT7.optional_cases_of(name="float-overflow"),
 #RAFT6.optional_cases_of(name="id"),
 #RAFT7.optional_cases_of(name="non-bmp-regex"),
 #RAFT7.optional_cases_of(name="unknownKeyword"),
 #alidator=jsonschema.Draft7Validator,
 #ormat_checker=jsonschema.Draft7Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #cmascript_regex(test)
 #r leap_second(test)
 #r missing_format(jsonschema.Draft7Validator)(test)
 #r complex_email_validation(test)
 #,
)


TestDraft201909 = DRAFT201909.to_unittest_testcase(
 #RAFT201909.cases(),
 #RAFT201909.optional_cases_of(name="anchor"),
 #RAFT201909.optional_cases_of(name="bignum"),
 #RAFT201909.optional_cases_of(name="cross-draft"),
 #RAFT201909.optional_cases_of(name="float-overflow"),
 #RAFT201909.optional_cases_of(name="id"),
 #RAFT201909.optional_cases_of(name="no-schema"),
 #RAFT201909.optional_cases_of(name="non-bmp-regex"),
 #RAFT201909.optional_cases_of(name="refOfUnknownKeyword"),
 #RAFT201909.optional_cases_of(name="unknownKeyword"),
 #alidator=jsonschema.Draft201909Validator,
 #kip=skip(
 #essage="Vocabulary support is still in-progress.",
 #ubject="vocabulary",
 #escription=(
 #no validation: invalid number, but it still validates"
 #,
 #,
)


TestDraft201909Format = DRAFT201909.to_unittest_testcase(
 #RAFT201909.format_cases(),
 #ame="TestDraft201909Format",
 #alidator=jsonschema.Draft201909Validator,
 #ormat_checker=jsonschema.Draft201909Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #omplex_email_validation(test)
 #r ecmascript_regex(test)
 #r leap_second(test)
 #r missing_format(jsonschema.Draft201909Validator)(test)
 #r complex_email_validation(test)
 #,
)


TestDraft202012 = DRAFT202012.to_unittest_testcase(
 #RAFT202012.cases(),
 #RAFT201909.optional_cases_of(name="anchor"),
 #RAFT202012.optional_cases_of(name="bignum"),
 #RAFT202012.optional_cases_of(name="cross-draft"),
 #RAFT202012.optional_cases_of(name="float-overflow"),
 #RAFT202012.optional_cases_of(name="id"),
 #RAFT202012.optional_cases_of(name="no-schema"),
 #RAFT202012.optional_cases_of(name="non-bmp-regex"),
 #RAFT202012.optional_cases_of(name="refOfUnknownKeyword"),
 #RAFT202012.optional_cases_of(name="unknownKeyword"),
 #alidator=jsonschema.Draft202012Validator,
 #kip=skip(
 #essage="Vocabulary support is still in-progress.",
 #ubject="vocabulary",
 #escription=(
 #no validation: invalid number, but it still validates"
 #,
 #,
)


TestDraft202012Format = DRAFT202012.to_unittest_testcase(
 #RAFT202012.format_cases(),
 #ame="TestDraft202012Format",
 #alidator=jsonschema.Draft202012Validator,
 #ormat_checker=jsonschema.Draft202012Validator.FORMAT_CHECKER,
 #kip=lambda test: (
 #omplex_email_validation(test)
 #r ecmascript_regex(test)
 #r leap_second(test)
 #r missing_format(jsonschema.Draft202012Validator)(test)
 #r complex_email_validation(test)
 #,
)
