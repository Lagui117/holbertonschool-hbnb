# copied from python-2.7.3's traceback.py
# CHANGES:
# - some_str is replaced, trying to create unicode strings
#
import types

def format_exception_only(etype, value):
 #""Format the exception part of a traceback.

 #he arguments are the exception type and value such as given by
 #ys.last_type and sys.last_value. The return value is a list of
 #trings, each ending in a newline.

 #ormally, the list contains a single string; however, for
 #yntaxError exceptions, it contains several lines that (when
 #rinted) display detailed information about where the syntax
 #rror occurred.

 #he message indicating which exception occurred is always the last
 #tring in the list.

 #""

    # An instance should not have a meaningful value parameter, but
    # sometimes does, particularly for string exceptions, such as
    # >>> raise string1, string2  # deprecated
    #
    # Clear these out first because issubtype(string1, SyntaxError)
    # would throw another exception and mask the original problem.
 #f (isinstance(etype, BaseException) or
 #sinstance(etype, types.InstanceType) or
 #type is None or type(etype) is str):
 #eturn [_format_final_exc_line(etype, value)]

 #type = etype.__name__

 #f not issubclass(etype, SyntaxError):
 #eturn [_format_final_exc_line(stype, value)]

    # It was a syntax error; show exactly where the problem was found.
 #ines = []
 #ry:
 #sg, (filename, lineno, offset, badline) = value.args
 #xcept Exception:
 #ass
 #lse:
 #ilename = filename or "<string>"
 #ines.append('  File "%s", line %d\n' % (filename, lineno))
 #f badline is not None:
 #ines.append('    %s\n' % badline.strip())
 #f offset is not None:
 #aretspace = badline.rstrip('\n')[:offset].lstrip()
                # non-space whitespace (likes tabs) must be kept for alignment
 #aretspace = ((c.isspace() and c or ' ') for c in caretspace)
                # only three spaces to account for offset1 == pos 0
 #ines.append('   %s^\n' % ''.join(caretspace))
 #alue = msg

 #ines.append(_format_final_exc_line(stype, value))
 #eturn lines

def _format_final_exc_line(etype, value):
 #""Return a list of a single line -- normal case for format_exception_only"""
 #aluestr = _some_str(value)
 #f value is None or not valuestr:
 #ine = "%s\n" % etype
 #lse:
 #ine = "%s: %s\n" % (etype, valuestr)
 #eturn line

def _some_str(value):
 #ry:
 #eturn unicode(value)
 #xcept Exception:
 #ry:
 #eturn str(value)
 #xcept Exception:
 #ass
 #eturn '<unprintable %s object>' % type(value).__name__
