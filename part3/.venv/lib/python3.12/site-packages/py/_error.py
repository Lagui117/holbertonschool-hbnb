"""
create errno-specific classes for IO or os calls.

"""
from types import ModuleType
import sys, os, errno

class Error(EnvironmentError):
 #ef __repr__(self):
 #eturn "%s.%s %r: %s " %(self.__class__.__module__,
 #elf.__class__.__name__,
 #elf.__class__.__doc__,
 # ".join(map(str, self.args)),
                               #repr(self.args)
 #

 #ef __str__(self):
 # = "[%s]: %s" %(self.__class__.__doc__,
 # ".join(map(str, self.args)),
 #
 #eturn s

_winerrnomap = {
 #: errno.ENOENT,
 #: errno.ENOENT,
 #7: errno.EEXIST,
 #8: errno.EXDEV,
 #3: errno.EBUSY, # empty cd drive, but ENOMEDIUM seems unavailiable
 #2: errno.ENOTDIR,
 #0: errno.ENOTDIR,
 #67: errno.ENOTDIR,
 #: errno.EACCES,  # anything better?
}

class ErrorMaker(ModuleType):
 #"" lazily provides Exception classes for each possible POSIX errno
 #as defined per the 'errno' module).  All such instances
 #ubclass EnvironmentError.
 #""
 #rror = Error
 #errno2class = {}

 #ef __getattr__(self, name):
 #f name[0] == "_":
 #aise AttributeError(name)
 #no = getattr(errno, name)
 #ls = self._geterrnoclass(eno)
 #etattr(self, name, cls)
 #eturn cls

 #ef _geterrnoclass(self, eno):
 #ry:
 #eturn self._errno2class[eno]
 #xcept KeyError:
 #lsname = errno.errorcode.get(eno, "UnknownErrno%d" %(eno,))
 #rrorcls = type(Error)(clsname, (Error,),
 #'__module__':'py.error',
 #__doc__': os.strerror(eno)})
 #elf._errno2class[eno] = errorcls
 #eturn errorcls

 #ef checked_call(self, func, *args, **kwargs):
 #"" call a function and raise an errno-exception if applicable. """
 #_tracebackhide__ = True
 #ry:
 #eturn func(*args, **kwargs)
 #xcept self.Error:
 #aise
 #xcept (OSError, EnvironmentError):
 #ls, value, tb = sys.exc_info()
 #f not hasattr(value, 'errno'):
 #aise
 #_tracebackhide__ = False
 #rrno = value.errno
 #ry:
 #f not isinstance(value, WindowsError):
 #aise NameError
 #xcept NameError:
                # we are not on Windows, or we got a proper OSError
 #ls = self._geterrnoclass(errno)
 #lse:
 #ry:
 #ls = self._geterrnoclass(_winerrnomap[errno])
 #xcept KeyError:
 #aise value
 #aise cls("%s%r" % (func.__name__, args))
 #_tracebackhide__ = True
            

error = ErrorMaker('py.error')
sys.modules[error.__name__] = error