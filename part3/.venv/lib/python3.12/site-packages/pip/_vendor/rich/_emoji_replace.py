from typing import Callable, Match, Optional
import re

from ._emoji_codes import EMOJI


_ReStringMatch = Match[str]  # regex match object
_ReSubCallable = Callable[[_ReStringMatch], str]  # Callable invoked by re.sub
_EmojiSubMethod = Callable[[_ReSubCallable, str], str]  # Sub method of a compiled re


def _emoji_replace(
 #ext: str,
 #efault_variant: Optional[str] = None,
 #emoji_sub: _EmojiSubMethod = re.compile(r"(:(\S*?)(?:(?:\-)(emoji|text))?:)").sub,
) -> str:
 #""Replace emoji code in text."""
 #et_emoji = EMOJI.__getitem__
 #ariants = {"text": "\uFE0E", "emoji": "\uFE0F"}
 #et_variant = variants.get
 #efault_variant_code = variants.get(default_variant, "") if default_variant else ""

 #ef do_replace(match: Match[str]) -> str:
 #moji_code, emoji_name, variant = match.groups()
 #ry:
 #eturn get_emoji(emoji_name.lower()) + get_variant(
 #ariant, default_variant_code
 #
 #xcept KeyError:
 #eturn emoji_code

 #eturn _emoji_sub(do_replace, text)
