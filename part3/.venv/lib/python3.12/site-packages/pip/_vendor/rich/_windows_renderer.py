from typing import Iterable, Sequence, Tuple, cast

from pip._vendor.rich._win32_console import LegacyWindowsTerm, WindowsCoordinates
from pip._vendor.rich.segment import ControlCode, ControlType, Segment


def legacy_windows_render(buffer: Iterable[Segment], term: LegacyWindowsTerm) -> None:
 #""Makes appropriate Windows Console API calls based on the segments in the buffer.

 #rgs:
 #uffer (Iterable[Segment]): Iterable of Segments to convert to Win32 API calls.
 #erm (LegacyWindowsTerm): Used to call the Windows Console API.
 #""
 #or text, style, control in buffer:
 #f not control:
 #f style:
 #erm.write_styled(text, style)
 #lse:
 #erm.write_text(text)
 #lse:
 #ontrol_codes: Sequence[ControlCode] = control
 #or control_code in control_codes:
 #ontrol_type = control_code[0]
 #f control_type == ControlType.CURSOR_MOVE_TO:
 #, x, y = cast(Tuple[ControlType, int, int], control_code)
 #erm.move_cursor_to(WindowsCoordinates(row=y - 1, col=x - 1))
 #lif control_type == ControlType.CARRIAGE_RETURN:
 #erm.write_text("\r")
 #lif control_type == ControlType.HOME:
 #erm.move_cursor_to(WindowsCoordinates(0, 0))
 #lif control_type == ControlType.CURSOR_UP:
 #erm.move_cursor_up()
 #lif control_type == ControlType.CURSOR_DOWN:
 #erm.move_cursor_down()
 #lif control_type == ControlType.CURSOR_FORWARD:
 #erm.move_cursor_forward()
 #lif control_type == ControlType.CURSOR_BACKWARD:
 #erm.move_cursor_backward()
 #lif control_type == ControlType.CURSOR_MOVE_TO_COLUMN:
 #, column = cast(Tuple[ControlType, int], control_code)
 #erm.move_cursor_to_column(column - 1)
 #lif control_type == ControlType.HIDE_CURSOR:
 #erm.hide_cursor()
 #lif control_type == ControlType.SHOW_CURSOR:
 #erm.show_cursor()
 #lif control_type == ControlType.ERASE_IN_LINE:
 #, mode = cast(Tuple[ControlType, int], control_code)
 #f mode == 0:
 #erm.erase_end_of_line()
 #lif mode == 1:
 #erm.erase_start_of_line()
 #lif mode == 2:
 #erm.erase_line()
 #lif control_type == ControlType.SET_WINDOW_TITLE:
 #, title = cast(Tuple[ControlType, str], control_code)
 #erm.set_title(title)
