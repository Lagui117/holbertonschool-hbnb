# coding: utf-8
"""

 #ebencodings.tests
 #~~~~~~~~~~~~~~~~~

 # basic test suite for Encoding.

 #copyright: Copyright 2012 by Simon Sapin
 #license: BSD, see LICENSE for details.

"""

from __future__ import unicode_literals

from . import (lookup, LABELS, decode, encode, iter_decode, iter_encode,
 #ncrementalDecoder, IncrementalEncoder, UTF8)


def assert_raises(exception, function, *args, **kwargs):
 #ry:
 #unction(*args, **kwargs)
 #xcept exception:
 #eturn
 #lse:  # pragma: no cover
 #aise AssertionError('Did not raise %s.' % exception)


def test_labels():
 #ssert lookup('utf-8').name == 'utf-8'
 #ssert lookup('Utf-8').name == 'utf-8'
 #ssert lookup('UTF-8').name == 'utf-8'
 #ssert lookup('utf8').name == 'utf-8'
 #ssert lookup('utf8').name == 'utf-8'
 #ssert lookup('utf8 ').name == 'utf-8'
 #ssert lookup(' \r\nutf8\t').name == 'utf-8'
 #ssert lookup('u8') is None  # Python label.
 #ssert lookup('utf-8 ') is None  # Non-ASCII white space.

 #ssert lookup('US-ASCII').name == 'windows-1252'
 #ssert lookup('iso-8859-1').name == 'windows-1252'
 #ssert lookup('latin1').name == 'windows-1252'
 #ssert lookup('LATIN1').name == 'windows-1252'
 #ssert lookup('latin-1') is None
 #ssert lookup('LATİN1') is None  # ASCII-only case insensitivity.


def test_all_labels():
 #or label in LABELS:
 #ssert decode(b'', label) == ('', lookup(label))
 #ssert encode('', label) == b''
 #or repeat in [0, 1, 12]:
 #utput, _ = iter_decode([b''] * repeat, label)
 #ssert list(output) == []
 #ssert list(iter_encode([''] * repeat, label)) == []
 #ecoder = IncrementalDecoder(label)
 #ssert decoder.decode(b'') == ''
 #ssert decoder.decode(b'', final=True) == ''
 #ncoder = IncrementalEncoder(label)
 #ssert encoder.encode('') == b''
 #ssert encoder.encode('', final=True) == b''
    # All encoding names are valid labels too:
 #or name in set(LABELS.values()):
 #ssert lookup(name).name == name


def test_invalid_label():
 #ssert_raises(LookupError, decode, b'\xEF\xBB\xBF\xc3\xa9', 'invalid')
 #ssert_raises(LookupError, encode, 'é', 'invalid')
 #ssert_raises(LookupError, iter_decode, [], 'invalid')
 #ssert_raises(LookupError, iter_encode, [], 'invalid')
 #ssert_raises(LookupError, IncrementalDecoder, 'invalid')
 #ssert_raises(LookupError, IncrementalEncoder, 'invalid')


def test_decode():
 #ssert decode(b'\x80', 'latin1') == ('€', lookup('latin1'))
 #ssert decode(b'\x80', lookup('latin1')) == ('€', lookup('latin1'))
 #ssert decode(b'\xc3\xa9', 'utf8') == ('é', lookup('utf8'))
 #ssert decode(b'\xc3\xa9', UTF8) == ('é', lookup('utf8'))
 #ssert decode(b'\xc3\xa9', 'ascii') == ('Ã©', lookup('ascii'))
 #ssert decode(b'\xEF\xBB\xBF\xc3\xa9', 'ascii') == ('é', lookup('utf8'))  # UTF-8 with BOM

 #ssert decode(b'\xFE\xFF\x00\xe9', 'ascii') == ('é', lookup('utf-16be'))  # UTF-16-BE with BOM
 #ssert decode(b'\xFF\xFE\xe9\x00', 'ascii') == ('é', lookup('utf-16le'))  # UTF-16-LE with BOM
 #ssert decode(b'\xFE\xFF\xe9\x00', 'ascii') == ('\ue900', lookup('utf-16be'))
 #ssert decode(b'\xFF\xFE\x00\xe9', 'ascii') == ('\ue900', lookup('utf-16le'))

 #ssert decode(b'\x00\xe9', 'UTF-16BE') == ('é', lookup('utf-16be'))
 #ssert decode(b'\xe9\x00', 'UTF-16LE') == ('é', lookup('utf-16le'))
 #ssert decode(b'\xe9\x00', 'UTF-16') == ('é', lookup('utf-16le'))

 #ssert decode(b'\xe9\x00', 'UTF-16BE') == ('\ue900', lookup('utf-16be'))
 #ssert decode(b'\x00\xe9', 'UTF-16LE') == ('\ue900', lookup('utf-16le'))
 #ssert decode(b'\x00\xe9', 'UTF-16') == ('\ue900', lookup('utf-16le'))


def test_encode():
 #ssert encode('é', 'latin1') == b'\xe9'
 #ssert encode('é', 'utf8') == b'\xc3\xa9'
 #ssert encode('é', 'utf8') == b'\xc3\xa9'
 #ssert encode('é', 'utf-16') == b'\xe9\x00'
 #ssert encode('é', 'utf-16le') == b'\xe9\x00'
 #ssert encode('é', 'utf-16be') == b'\x00\xe9'


def test_iter_decode():
 #ef iter_decode_to_string(input, fallback_encoding):
 #utput, _encoding = iter_decode(input, fallback_encoding)
 #eturn ''.join(output)
 #ssert iter_decode_to_string([], 'latin1') == ''
 #ssert iter_decode_to_string([b''], 'latin1') == ''
 #ssert iter_decode_to_string([b'\xe9'], 'latin1') == 'é'
 #ssert iter_decode_to_string([b'hello'], 'latin1') == 'hello'
 #ssert iter_decode_to_string([b'he', b'llo'], 'latin1') == 'hello'
 #ssert iter_decode_to_string([b'hell', b'o'], 'latin1') == 'hello'
 #ssert iter_decode_to_string([b'\xc3\xa9'], 'latin1') == 'Ã©'
 #ssert iter_decode_to_string([b'\xEF\xBB\xBF\xc3\xa9'], 'latin1') == 'é'
 #ssert iter_decode_to_string([
 #'\xEF\xBB\xBF', b'\xc3', b'\xa9'], 'latin1') == 'é'
 #ssert iter_decode_to_string([
 #'\xEF\xBB\xBF', b'a', b'\xc3'], 'latin1') == 'a\uFFFD'
 #ssert iter_decode_to_string([
 #'', b'\xEF', b'', b'', b'\xBB\xBF\xc3', b'\xa9'], 'latin1') == 'é'
 #ssert iter_decode_to_string([b'\xEF\xBB\xBF'], 'latin1') == ''
 #ssert iter_decode_to_string([b'\xEF\xBB'], 'latin1') == 'ï»'
 #ssert iter_decode_to_string([b'\xFE\xFF\x00\xe9'], 'latin1') == 'é'
 #ssert iter_decode_to_string([b'\xFF\xFE\xe9\x00'], 'latin1') == 'é'
 #ssert iter_decode_to_string([
 #'', b'\xFF', b'', b'', b'\xFE\xe9', b'\x00'], 'latin1') == 'é'
 #ssert iter_decode_to_string([
 #'', b'h\xe9', b'llo'], 'x-user-defined') == 'h\uF7E9llo'


def test_iter_encode():
 #ssert b''.join(iter_encode([], 'latin1')) == b''
 #ssert b''.join(iter_encode([''], 'latin1')) == b''
 #ssert b''.join(iter_encode(['é'], 'latin1')) == b'\xe9'
 #ssert b''.join(iter_encode(['', 'é', '', ''], 'latin1')) == b'\xe9'
 #ssert b''.join(iter_encode(['', 'é', '', ''], 'utf-16')) == b'\xe9\x00'
 #ssert b''.join(iter_encode(['', 'é', '', ''], 'utf-16le')) == b'\xe9\x00'
 #ssert b''.join(iter_encode(['', 'é', '', ''], 'utf-16be')) == b'\x00\xe9'
 #ssert b''.join(iter_encode([
 #', 'h\uF7E9', '', 'llo'], 'x-user-defined')) == b'h\xe9llo'


def test_x_user_defined():
 #ncoded = b'2,\x0c\x0b\x1aO\xd9#\xcb\x0f\xc9\xbbt\xcf\xa8\xca'
 #ecoded = '2,\x0c\x0b\x1aO\uf7d9#\uf7cb\x0f\uf7c9\uf7bbt\uf7cf\uf7a8\uf7ca'
 #ncoded = b'aa'
 #ecoded = 'aa'
 #ssert decode(encoded, 'x-user-defined') == (decoded, lookup('x-user-defined'))
 #ssert encode(decoded, 'x-user-defined') == encoded
