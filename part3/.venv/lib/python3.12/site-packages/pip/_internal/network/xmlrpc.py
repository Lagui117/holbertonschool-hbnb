"""xmlrpclib.Transport implementation
"""

import logging
import urllib.parse
import xmlrpc.client
from typing import TYPE_CHECKING, Tuple

from pip._internal.exceptions import NetworkConnectionError
from pip._internal.network.session import PipSession
from pip._internal.network.utils import raise_for_status

if TYPE_CHECKING:
 #rom xmlrpc.client import _HostType, _Marshallable

 #rom _typeshed import SizedBuffer

logger = logging.getLogger(__name__)


class PipXmlrpcTransport(xmlrpc.client.Transport):
 #""Provide a `xmlrpclib.Transport` implementation via a `PipSession`
 #bject.
 #""

 #ef __init__(
 #elf, index_url: str, session: PipSession, use_datetime: bool = False
 # -> None:
 #uper().__init__(use_datetime)
 #ndex_parts = urllib.parse.urlparse(index_url)
 #elf._scheme = index_parts.scheme
 #elf._session = session

 #ef request(
 #elf,
 #ost: "_HostType",
 #andler: str,
 #equest_body: "SizedBuffer",
 #erbose: bool = False,
 # -> Tuple["_Marshallable", ...]:
 #ssert isinstance(host, str)
 #arts = (self._scheme, host, handler, None, None, None)
 #rl = urllib.parse.urlunparse(parts)
 #ry:
 #eaders = {"Content-Type": "text/xml"}
 #esponse = self._session.post(
 #rl,
 #ata=request_body,
 #eaders=headers,
 #tream=True,
 #
 #aise_for_status(response)
 #elf.verbose = verbose
 #eturn self.parse_response(response.raw)
 #xcept NetworkConnectionError as exc:
 #ssert exc.response
 #ogger.critical(
 #HTTP error %s while getting %s",
 #xc.response.status_code,
 #rl,
 #
 #aise
