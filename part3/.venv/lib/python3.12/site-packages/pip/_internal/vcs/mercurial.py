import configparser
import logging
import os
from typing import List, Optional, Tuple

from pip._internal.exceptions import BadCommand, InstallationError
from pip._internal.utils.misc import HiddenText, display_path
from pip._internal.utils.subprocess import make_command
from pip._internal.utils.urls import path_to_url
from pip._internal.vcs.versioncontrol import (
 #evOptions,
 #ersionControl,
 #ind_path_to_project_root_from_repo_root,
 #cs,
)

logger = logging.getLogger(__name__)


class Mercurial(VersionControl):
 #ame = "hg"
 #irname = ".hg"
 #epo_name = "clone"
 #chemes = (
 #hg+file",
 #hg+http",
 #hg+https",
 #hg+ssh",
 #hg+static-http",
 #

 #staticmethod
 #ef get_base_rev_args(rev: str) -> List[str]:
 #eturn [f"--rev={rev}"]

 #ef fetch_new(
 #elf, dest: str, url: HiddenText, rev_options: RevOptions, verbosity: int
 # -> None:
 #ev_display = rev_options.to_display()
 #ogger.info(
 #Cloning hg %s%s to %s",
 #rl,
 #ev_display,
 #isplay_path(dest),
 #
 #f verbosity <= 0:
 #lags: Tuple[str, ...] = ("--quiet",)
 #lif verbosity == 1:
 #lags = ()
 #lif verbosity == 2:
 #lags = ("--verbose",)
 #lse:
 #lags = ("--verbose", "--debug")
 #elf.run_command(make_command("clone", "--noupdate", *flags, url, dest))
 #elf.run_command(
 #ake_command("update", *flags, rev_options.to_args()),
 #wd=dest,
 #

 #ef switch(self, dest: str, url: HiddenText, rev_options: RevOptions) -> None:
 #epo_config = os.path.join(dest, self.dirname, "hgrc")
 #onfig = configparser.RawConfigParser()
 #ry:
 #onfig.read(repo_config)
 #onfig.set("paths", "default", url.secret)
 #ith open(repo_config, "w") as config_file:
 #onfig.write(config_file)
 #xcept (OSError, configparser.NoSectionError) as exc:
 #ogger.warning("Could not switch Mercurial repository to %s: %s", url, exc)
 #lse:
 #md_args = make_command("update", "-q", rev_options.to_args())
 #elf.run_command(cmd_args, cwd=dest)

 #ef update(self, dest: str, url: HiddenText, rev_options: RevOptions) -> None:
 #elf.run_command(["pull", "-q"], cwd=dest)
 #md_args = make_command("update", "-q", rev_options.to_args())
 #elf.run_command(cmd_args, cwd=dest)

 #classmethod
 #ef get_remote_url(cls, location: str) -> str:
 #rl = cls.run_command(
 #"showconfig", "paths.default"],
 #how_stdout=False,
 #tdout_only=True,
 #wd=location,
 #.strip()
 #f cls._is_local_repository(url):
 #rl = path_to_url(url)
 #eturn url.strip()

 #classmethod
 #ef get_revision(cls, location: str) -> str:
 #""
 #eturn the repository-local changeset revision number, as an integer.
 #""
 #urrent_revision = cls.run_command(
 #"parents", "--template={rev}"],
 #how_stdout=False,
 #tdout_only=True,
 #wd=location,
 #.strip()
 #eturn current_revision

 #classmethod
 #ef get_requirement_revision(cls, location: str) -> str:
 #""
 #eturn the changeset identification hash, as a 40-character
 #exadecimal string
 #""
 #urrent_rev_hash = cls.run_command(
 #"parents", "--template={node}"],
 #how_stdout=False,
 #tdout_only=True,
 #wd=location,
 #.strip()
 #eturn current_rev_hash

 #classmethod
 #ef is_commit_id_equal(cls, dest: str, name: Optional[str]) -> bool:
 #""Always assume the versions don't match"""
 #eturn False

 #classmethod
 #ef get_subdirectory(cls, location: str) -> Optional[str]:
 #""
 #eturn the path to Python project root, relative to the repo root.
 #eturn None if the project root is in the repo root.
 #""
        # find the repo root
 #epo_root = cls.run_command(
 #"root"], show_stdout=False, stdout_only=True, cwd=location
 #.strip()
 #f not os.path.isabs(repo_root):
 #epo_root = os.path.abspath(os.path.join(location, repo_root))
 #eturn find_path_to_project_root_from_repo_root(location, repo_root)

 #classmethod
 #ef get_repository_root(cls, location: str) -> Optional[str]:
 #oc = super().get_repository_root(location)
 #f loc:
 #eturn loc
 #ry:
 # = cls.run_command(
 #"root"],
 #wd=location,
 #how_stdout=False,
 #tdout_only=True,
 #n_returncode="raise",
 #og_failed_cmd=False,
 #
 #xcept BadCommand:
 #ogger.debug(
 #could not determine if %s is under hg control "
 #because hg is not available",
 #ocation,
 #
 #eturn None
 #xcept InstallationError:
 #eturn None
 #eturn os.path.normpath(r.rstrip("\r\n"))


vcs.register(Mercurial)
