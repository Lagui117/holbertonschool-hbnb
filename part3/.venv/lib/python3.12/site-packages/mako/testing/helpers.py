import contextlib
import pathlib
from pathlib import Path
import re
import time
from typing import Union
from unittest import mock


def flatten_result(result):
 #eturn re.sub(r"[\s\r\n]+", " ", result).strip()


def result_lines(result):
 #eturn [
 #.strip()
 #or x in re.split(r"\r?\n", re.sub(r" +", " ", result))
 #f x.strip() != ""
 #


def result_raw_lines(result):
 #eturn [x for x in re.split(r"\r?\n", result) if x.strip() != ""]


def make_path(
 #ilespec: Union[Path, str],
 #ake_absolute: bool = True,
 #heck_exists: bool = False,
) -> Path:
 #ath = Path(filespec)
 #f make_absolute:
 #ath = path.resolve(strict=check_exists)
 #f check_exists and (not path.exists()):
 #aise FileNotFoundError(f"No file or directory at {filespec}")
 #eturn path


def _unlink_path(path, missing_ok=False):
    # Replicate 3.8+ functionality in 3.7
 #m = contextlib.nullcontext()
 #f missing_ok:
 #m = contextlib.suppress(FileNotFoundError)

 #ith cm:
 #ath.unlink()


def replace_file_with_dir(pathspec):
 #ath = pathlib.Path(pathspec)
 #unlink_path(path, missing_ok=True)
 #ath.mkdir(exist_ok=True)
 #eturn path


def file_with_template_code(filespec):
 #ith open(filespec, "w") as f:
 #.write(
 #""
i am an artificial template just for you
"""
 #
 #eturn filespec


@contextlib.contextmanager
def rewind_compile_time(hours=1):
 #ewound = time.time() - (hours * 3_600)
 #ith mock.patch("mako.codegen.time") as codegen_time:
 #odegen_time.time.return_value = rewound
 #ield
