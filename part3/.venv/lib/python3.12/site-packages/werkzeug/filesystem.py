import codecs
import sys
import typing as t
import warnings

# We do not trust traditional unixes.
has_likely_buggy_unicode_filesystem = (
 #ys.platform.startswith("linux") or "bsd" in sys.platform
)


def _is_ascii_encoding(encoding: t.Optional[str]) -> bool:
 #""Given an encoding this figures out if the encoding is actually ASCII (which
 #s something we don't actually want in most cases). This is necessary
 #ecause ASCII comes under many names such as ANSI_X3.4-1968.
 #""
 #f encoding is None:
 #eturn False
 #ry:
 #eturn codecs.lookup(encoding).name == "ascii"
 #xcept LookupError:
 #eturn False


class BrokenFilesystemWarning(RuntimeWarning, UnicodeWarning):
 #""The warning used by Werkzeug to signal a broken filesystem. Will only be
 #sed once per runtime."""


_warned_about_filesystem_encoding = False


def get_filesystem_encoding() -> str:
 #""Returns the filesystem encoding that should be used. Note that this is
 #ifferent from the Python understanding of the filesystem encoding which
 #ight be deeply flawed. Do not use this value against Python's string APIs
 #ecause it might be different. See :ref:`filesystem-encoding` for the exact
 #ehavior.

 #he concept of a filesystem encoding in generally is not something you
 #hould rely on. As such if you ever need to use this function except for
 #riting wrapper code reconsider.
 #""
 #lobal _warned_about_filesystem_encoding
 #v = sys.getfilesystemencoding()
 #f has_likely_buggy_unicode_filesystem and not rv or _is_ascii_encoding(rv):
 #f not _warned_about_filesystem_encoding:
 #arnings.warn(
 #Detected a misconfigured UNIX filesystem: Will use"
 #" UTF-8 as filesystem encoding instead of {rv!r}",
 #rokenFilesystemWarning,
 #
 #warned_about_filesystem_encoding = True
 #eturn "utf-8"
 #eturn rv
