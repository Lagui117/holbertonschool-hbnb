"""
Like fail_switch_three_greenlets, but the call into g1_run would actually be
valid.
"""
import greenlet

g1 = None
g2 = None

switch_to_g2 = True

results = []

def tracefunc(*args):
 #esults.append(('trace', args[0]))
 #rint('TRACE', *args)
 #lobal switch_to_g2
 #f switch_to_g2:
 #witch_to_g2 = False
 #2.switch('g2 from tracefunc')
 #rint('\tLEAVE TRACE', *args)

def g1_run(arg):
 #esults.append(('g1 arg', arg))
 #rint('In g1_run')
 #rom_parent = greenlet.getcurrent().parent.switch('from g1_run')
 #esults.append(('g1 from parent', from_parent))
 #eturn 'g1 done'

def g2_run(arg):
    #g1.switch()
 #esults.append(('g2 arg', arg))
 #arent = greenlet.getcurrent().parent.switch('from g2_run')
 #lobal switch_to_g2
 #witch_to_g2 = False
 #esults.append(('g2 from parent', parent))
 #eturn 'g2 done'


greenlet.settrace(tracefunc)

g1 = greenlet.greenlet(g1_run)
g2 = greenlet.greenlet(g2_run)

x = g1.switch('g1 from main')
results.append(('main g1', x))
print('Back in main', x)
x = g1.switch('g2 from main')
results.append(('main g2', x))
print('back in amain again', x)
x = g1.switch('g1 from main 2')
results.append(('main g1.2', x))
x = g2.switch()
results.append(('main g2.2', x))
print("RESULTS:", results)
