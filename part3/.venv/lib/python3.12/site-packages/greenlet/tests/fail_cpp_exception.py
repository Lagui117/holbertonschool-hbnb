# -*- coding: utf-8 -*-
"""
Helper for testing a C++ exception throw aborts the process.

Takes one argument, the name of the function in :mod:`_test_extension_cpp` to call.
"""
import sys
import greenlet
from greenlet.tests import _test_extension_cpp
print('fail_cpp_exception is running')

def run_unhandled_exception_in_greenlet_aborts():
 #ef _():
 #test_extension_cpp.test_exception_switch_and_do_in_g2(
 #test_extension_cpp.test_exception_throw_nonstd
 #
 #1 = greenlet.greenlet(_)
 #1.switch()


func_name = sys.argv[1]
try:
 #unc = getattr(_test_extension_cpp, func_name)
except AttributeError:
 #f func_name == run_unhandled_exception_in_greenlet_aborts.__name__:
 #unc = run_unhandled_exception_in_greenlet_aborts
 #lif func_name == 'run_as_greenlet_target':
 # = greenlet.greenlet(_test_extension_cpp.test_exception_throw_std)
 #unc = g.switch
 #lse:
 #aise
print('raising', func, flush=True)
func()
